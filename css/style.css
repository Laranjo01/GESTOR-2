/* ==========================================================================
   Gestor Financeiro - Modern Style v2.2 (Ajustes Finos)
   ========================================================================== */

/* -------------------------------------------------------------------------- */
/* --- Variáveis Globais e Temas --- */
/* -------------------------------------------------------------------------- */

:root {
    /* Fontes */
    --font-primary: 'Poppins', sans-serif;

    /* Cores Base (Tema Claro - Padrão) */
    --color-text: #343a40;
    --color-text-muted: #6c757d;
    --color-text-subtle: #868e96;
    --color-background: #f8f9fa;
    --color-sidebar-bg: #ffffff;
    --color-sidebar-text: #495057;
    --color-sidebar-icon: #6c757d;
    --color-sidebar-hover-bg: #e9ecef;
    --color-sidebar-active-bg: #dee2e6;
    --color-header-bg: rgba(255, 255, 255, 0.8);
    --color-card-bg: rgba(255, 255, 255, 0.9);
    --color-border: #dee2e6;
    --color-border-subtle: #e9ecef;
    --color-input-bg: #ffffff;
    --color-input-border: #ced4da;
    --color-modal-bg: rgba(255, 255, 255, 0.95);
    --color-modal-overlay: rgba(0, 0, 0, 0.6);
    --color-shadow: rgba(0, 0, 0, 0.05);
    --color-success: #198754;
    --color-success-rgb: 25, 135, 84;
    --color-danger: #dc3545;
    --color-danger-rgb: 220, 53, 69;
    --color-warning: #ffc107;
    --color-info: #0dcaf0;
    --color-info-rgb: 13, 202, 240;
    --primary-glow: rgba(13, 110, 253, 0.2);

    /* Cores de Tema (Accent - Padrão Azul 'default') */
    --primary-color: #0d6efd;
    --primary-color-rgb: 13, 110, 253;
    --primary-hover: #0b5ed7;
    --primary-active: #0a58ca;
    --secondary-color: #6c757d;
    --secondary-hover: #5c636a;
    --secondary-active: #565e64;

    /* Cores Específicas */
    --color-pix-border: #0dcaf0;
    --color-cash-border: #fd7e14;
    --color-card-balance-border: #6f42c1;

    --color-positive: var(--color-success);
    --color-negative: var(--color-danger);

    /* Cores Notas (Claro - Atualizado) */
    /* Bordas Mais Fortes */
    --note-border-default: #adb5bd;
    --note-border-yellow: #ffc107;
    --note-border-blue: #0d6efd;
    --note-border-green: #198754;
    --note-border-red: #dc3545;
    --note-border-purple: #6f42c1;
    /* Fundos Sutis */
    --note-faint-bg-default: rgba(233, 236, 239, 0.4); /* Mais transparente */
    --note-faint-bg-yellow: rgba(255, 243, 205, 0.3);
    --note-faint-bg-blue: rgba(207, 226, 255, 0.3);
    --note-faint-bg-green: rgba(209, 231, 221, 0.3);
    --note-faint-bg-red: rgba(248, 215, 218, 0.3);
    --note-faint-bg-purple: rgba(232, 217, 247, 0.3);
    /* Texto */
    --note-text-default: #3b434a;
    --note-text-yellow: #664d03;
    --note-text-blue: #052c65;
    --note-text-green: #0a3622;
    --note-text-red: #58151c;
    --note-text-purple: #442166;

    /* Dimensões e Espaçamento */
    --sidebar-width: 260px;
    --sidebar-width-collapsed: 80px;
    --header-height: 65px;
    --border-radius-sm: 0.25rem;
    --border-radius: 0.5rem;
    --border-radius-lg: 0.8rem;
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    --spacing-xl: 2rem;

    /* Transições */
    --transition-speed: 0.2s;
    --transition-speed-fast: 0.15s;
    --transition-timing: ease-in-out;

    /* Blur */
    --backdrop-blur-amount: 8px;
}

/* -------------------------------------------------------------------------- */
/* --- Tema Escuro --- */
/* -------------------------------------------------------------------------- */

[data-theme="dark"] {
    --color-text: #e9ecef;
    --color-text-muted: #adb5bd;
    --color-text-subtle: #868e96;
    --color-background: #1a1a1a;
    --color-sidebar-bg: #212529;
    --color-sidebar-text: #dee2e6;
    --color-sidebar-icon: #adb5bd;
    --color-sidebar-hover-bg: #343a40;
    --color-sidebar-active-bg: #495057;
    --color-header-bg: rgba(33, 37, 41, 0.8);
    --color-card-bg: rgba(42, 48, 54, 0.85);
    --color-border: #495057;
    --color-border-subtle: #343a40;
    --color-input-bg: #343a40;
    --color-input-border: #6c757d;
    --color-modal-bg: rgba(42, 48, 54, 0.95);
    --color-modal-overlay: rgba(0, 0, 0, 0.7);
    --color-shadow: rgba(0, 0, 0, 0.2);
    --color-success: #20c997;
    --color-danger: #f17474;
    --color-warning: #ffca2c;
    --color-info: #3dd5f3;
    --primary-glow: rgba(var(--primary-color-rgb), 0.3);

    /* Cores Notas (Dark - Atualizado) */
    /* Bordas Mantidas */
    --note-border-default: #6c757d;
    --note-border-yellow: #ffc107;
    --note-border-blue: #0d6efd;
    --note-border-green: #198754;
    --note-border-red: #dc3545;
    --note-border-purple: #6f42c1;
    /* Fundos Sutis */
    --note-faint-bg-default: rgba(69, 77, 85, 0.4); /* Mais transparente */
    --note-faint-bg-yellow: rgba(77, 62, 14, 0.3);
    --note-faint-bg-blue: rgba(20, 68, 127, 0.3);
    --note-faint-bg-green: rgba(24, 81, 55, 0.3);
    --note-faint-bg-red: rgba(102, 27, 34, 0.3);
    --note-faint-bg-purple: rgba(74, 39, 106, 0.3);
    /* Texto Claro */
    --note-text-default: #e9ecef;
    --note-text-yellow: #ffeeba;
    --note-text-blue: #cce5ff;
    --note-text-green: #d1e7dd;
    --note-text-red: #f8d7da;
    --note-text-purple: #e9d5ff;

    --color-pix-bg: rgba(13, 202, 240, 0.15);
    --color-cash-bg: rgba(253, 126, 20, 0.15);
    --color-card-balance-bg: rgba(111, 66, 193, 0.15);

    --color-positive: #20c997;
    --color-negative: #f17474;
}

/* ... (Restante das variações de Cor [data-color="..."] - sem alterações) ... */
[data-color="green"] { --primary-color: #198754; --primary-color-rgb: 25, 135, 84; --primary-hover: #157347; --primary-active: #146c43; }
[data-color="purple"] { --primary-color: #6f42c1; --primary-color-rgb: 111, 66, 193; --primary-hover: #653ab8; --primary-active: #5f35ad; }
[data-color="orange"] { --primary-color: #fd7e14; --primary-color-rgb: 253, 126, 20; --primary-hover: #e47112; --primary-active: #d96a10; }
[data-color="teal"] { --primary-color: #20c997; --primary-color-rgb: 32, 201, 151; --primary-hover: #1ba880; --primary-active: #199d77; }
[data-color="pink"] { --primary-color: #d63384; --primary-color-rgb: 214, 51, 132; --primary-hover: #c12e76; --primary-active: #b62a70; }
[data-color="green"] { --color-primary-glow: rgba(var(--primary-color-rgb), 0.25); }
[data-color="purple"] { --color-primary-glow: rgba(var(--primary-color-rgb), 0.25); }
[data-color="orange"] { --color-primary-glow: rgba(var(--primary-color-rgb), 0.25); }
[data-color="teal"] { --color-primary-glow: rgba(var(--primary-color-rgb), 0.25); }
[data-color="pink"] { --color-primary-glow: rgba(var(--primary-color-rgb), 0.25); }

/* -------------------------------------------------------------------------- */
/* --- Estilos Base e Reset Leve --- */
/* -------------------------------------------------------------------------- */
/* ... (Sem alterações significativas aqui) ... */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 16px; scroll-behavior: smooth; }
body { font-family: var(--font-primary); line-height: 1.6; background-color: var(--color-background); color: var(--color-text); transition: background-color var(--transition-speed) var(--transition-timing), color var(--transition-speed) var(--transition-timing); display: flex; min-height: 100vh; overflow-x: hidden; }
body::before { content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-image: url('../img/background.jpg'); background-size: cover; background-position: center center; background-attachment: fixed; z-index: -1; filter: blur(3px) brightness(0.9); opacity: 0.8; }
[data-theme="dark"] body::before { filter: blur(4px) brightness(0.6); opacity: 0.6; }
h1, h2, h3, h4, h5, h6 { font-weight: 600; line-height: 1.3; margin-bottom: var(--spacing-sm); }
h1 { font-size: 2rem; } h2 { font-size: 1.75rem; } h3 { font-size: 1.5rem; } h4 { font-size: 1.25rem; } h5 { font-size: 1.1rem; } h6 { font-size: 1rem; }
a { color: var(--primary-color); text-decoration: none; transition: color var(--transition-speed-fast) var(--transition-timing); }
a:hover { color: var(--primary-hover); text-decoration: underline; }
img { max-width: 100%; height: auto; display: block; }
ul { list-style: none; }
::-webkit-scrollbar { width: 8px; height: 8px; } ::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); border-radius: 10px; } ::-webkit-scrollbar-thumb { background-color: var(--color-text-muted); border-radius: 10px; border: 2px solid transparent; background-clip: content-box; } ::-webkit-scrollbar-thumb:hover { background-color: var(--color-text-subtle); }
* { scrollbar-width: thin; scrollbar-color: var(--color-text-muted) rgba(0,0,0,0.1); }

/* -------------------------------------------------------------------------- */
/* --- Layout Principal --- */
/* -------------------------------------------------------------------------- */
/* ... (Sem alterações significativas aqui) ... */
.sidebar { width: var(--sidebar-width); height: 100vh; position: fixed; top: 0; left: 0; background-color: var(--color-sidebar-bg); border-right: 1px solid var(--color-border-subtle); display: flex; flex-direction: column; z-index: 1000; transition: transform var(--transition-speed) var(--transition-timing), width var(--transition-speed) var(--transition-timing), background-color var(--transition-speed) var(--transition-timing); box-shadow: 2px 0 10px var(--color-shadow); }
.main-content { margin-left: var(--sidebar-width); flex-grow: 1; display: flex; flex-direction: column; padding: var(--spacing-lg); padding-top: calc(var(--header-height) + var(--spacing-lg)); transition: margin-left var(--transition-speed) var(--transition-timing); position: relative; min-height: 100vh; background-color: rgba(255, 255, 255, 0.1); backdrop-filter: blur(var(--backdrop-blur-amount)); -webkit-backdrop-filter: blur(var(--backdrop-blur-amount)); border-radius: var(--border-radius-lg); margin: var(--spacing-md); margin-left: calc(var(--sidebar-width) + var(--spacing-md)); padding-top: var(--header-height); }
[data-theme="dark"] .main-content { background-color: rgba(33, 37, 41, 0.3); }
.header { height: var(--header-height); background-color: var(--color-header-bg); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); border-bottom: 1px solid var(--color-border-subtle); display: flex; align-items: center; padding: 0 var(--spacing-lg); position: fixed; top: 0; left: var(--sidebar-width); right: 0; z-index: 900; transition: left var(--transition-speed) var(--transition-timing), background-color var(--transition-speed) var(--transition-timing); }
.page-title { margin: 0; font-size: 1.5rem; font-weight: 500; }
.menu-toggle, .close-sidebar { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--color-text-muted); padding: var(--spacing-sm); margin-right: var(--spacing-md); transition: color var(--transition-speed-fast) var(--transition-timing); }
.menu-toggle:hover, .close-sidebar:hover { color: var(--color-text); }
.close-sidebar { position: absolute; top: var(--spacing-sm); right: var(--spacing-sm); display: none; font-size: 1.8rem; }
.content-section { display: none; animation: fadeIn 0.4s ease-in-out; }
.content-section.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* -------------------------------------------------------------------------- */
/* --- Sidebar Detalhada --- */
/* -------------------------------------------------------------------------- */
/* ... (Sem alterações significativas aqui) ... */
.sidebar-header { display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-md) var(--spacing-lg); border-bottom: 1px solid var(--color-border-subtle); height: var(--header-height); }
.sidebar-title { font-size: 1.4rem; margin: 0; color: var(--primary-color); display: flex; align-items: center; gap: var(--spacing-sm); }
.sidebar-search { padding: var(--spacing-md) var(--spacing-lg); border-bottom: 1px solid var(--color-border-subtle); }
.search-input-wrapper { position: relative; }
.search-input-wrapper i { position: absolute; left: var(--spacing-md); top: 50%; transform: translateY(-50%); color: var(--color-text-muted); font-size: 0.9rem; }
#sidebarSearchInput { width: 100%; padding: var(--spacing-sm) var(--spacing-md) var(--spacing-sm) calc(var(--spacing-md) * 2.5); border: 1px solid var(--color-input-border); background-color: var(--color-input-bg); color: var(--color-text); border-radius: var(--border-radius); font-size: 0.9rem; transition: border-color var(--transition-speed-fast), box-shadow var(--transition-speed-fast); }
#sidebarSearchInput:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 2px var(--color-primary-glow); }
.sidebar-menu { flex-grow: 1; overflow-y: auto; padding: var(--spacing-md) 0; }
.menu-item { display: flex; align-items: center; padding: var(--spacing-sm) var(--spacing-lg); color: var(--color-sidebar-text); cursor: pointer; transition: background-color var(--transition-speed-fast), color var(--transition-speed-fast); border-left: 3px solid transparent; margin: var(--spacing-xs) 0; }
.menu-item i { margin-right: var(--spacing-md); font-size: 1.1rem; width: 20px; text-align: center; color: var(--color-sidebar-icon); transition: color var(--transition-speed-fast); }
.menu-item span { font-weight: 400; font-size: 0.95rem; }
.menu-item:hover { background-color: var(--color-sidebar-hover-bg); color: var(--color-text); }
.menu-item.active { background-color: var(--color-sidebar-active-bg); color: var(--primary-color); border-left-color: var(--primary-color); font-weight: 500; }
.menu-item.active i { color: var(--primary-color); }
.sidebar-footer { padding: var(--spacing-md) var(--spacing-lg); border-top: 1px solid var(--color-border-subtle); margin-top: auto; }
.sidebar-footer-actions { display: flex; justify-content: space-around; margin-bottom: var(--spacing-md); }
.footer-action-btn { background: none; border: none; color: var(--color-sidebar-icon); font-size: 1.2rem; padding: var(--spacing-xs); cursor: pointer; transition: color var(--transition-speed-fast); }
.footer-action-btn:hover { color: var(--primary-color); }
.user-profile { display: flex; align-items: center; gap: var(--spacing-md); margin-top: var(--spacing-sm); }
.user-avatar { width: 40px; height: 40px; border-radius: 50%; background-color: var(--color-border); display: flex; align-items: center; justify-content: center; color: var(--color-text-muted); font-size: 1.2rem; }
.user-name { font-weight: 500; font-size: 0.9rem; color: var(--color-text); }
.user-email { font-size: 0.8rem; color: var(--color-text-muted); }

/* -------------------------------------------------------------------------- */
/* --- Componentes Comuns (Cards, Forms, Buttons) --- */
/* -------------------------------------------------------------------------- */
/* ... (Sem alterações significativas aqui) ... */
.card { background-color: var(--color-card-bg); border: 1px solid var(--color-border-subtle); border-radius: var(--border-radius-lg); margin-bottom: var(--spacing-lg); box-shadow: 0 4px 15px var(--color-shadow); transition: background-color var(--transition-speed), border-color var(--transition-speed); overflow: hidden; }
.card-header { padding: var(--spacing-md) var(--spacing-lg); border-bottom: 1px solid var(--color-border-subtle); display: flex; justify-content: space-between; align-items: center; background-color: rgba(0,0,0,0.02); }
[data-theme="dark"] .card-header { background-color: rgba(255,255,255,0.03); }
.card-title { margin: 0; font-size: 1.1rem; font-weight: 500; }
.card-body { padding: var(--spacing-lg); }
.card-footer { padding: var(--spacing-md) var(--spacing-lg); border-top: 1px solid var(--color-border-subtle); background-color: rgba(0,0,0,0.02); display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem; color: var(--color-text-muted); }
[data-theme="dark"] .card-footer { background-color: rgba(255,255,255,0.03); }
.card-footer i { margin-right: var(--spacing-xs); }
.btn { display: inline-flex; align-items: center; justify-content: center; gap: var(--spacing-xs); padding: 0.5rem 1rem; font-size: 0.9rem; font-weight: 500; border-radius: var(--border-radius); cursor: pointer; border: 1px solid transparent; transition: background-color var(--transition-speed-fast), border-color var(--transition-speed-fast), color var(--transition-speed-fast), box-shadow var(--transition-speed-fast); white-space: nowrap; }
.btn i { line-height: 1; }
.btn-sm { padding: 0.35rem 0.7rem; font-size: 0.8rem; border-radius: var(--border-radius-sm); }
.btn-primary { background-color: var(--primary-color); border-color: var(--primary-color); color: #fff; }
.btn-primary:hover { background-color: var(--primary-hover); border-color: var(--primary-hover); color: #fff; text-decoration: none; }
.btn-primary:active, .btn-primary:focus { background-color: var(--primary-active); border-color: var(--primary-active); color: #fff; box-shadow: 0 0 0 3px var(--color-primary-glow); outline: none; }
.btn-primary:disabled { background-color: var(--primary-color); border-color: var(--primary-color); opacity: 0.65; cursor: not-allowed; }
.btn-success { background-color: var(--color-success); border-color: var(--color-success); color: #fff; }
.btn-success:hover { background-color: darken(var(--color-success), 10%); border-color: darken(var(--color-success), 10%); color: #fff; text-decoration: none;}
.btn-danger { background-color: var(--color-danger); border-color: var(--color-danger); color: #fff; }
.btn-danger:hover { background-color: darken(var(--color-danger), 10%); border-color: darken(var(--color-danger), 10%); color: #fff; text-decoration: none;}
.btn-warning { background-color: var(--color-warning); border-color: var(--color-warning); color: #212529; }
.btn-warning:hover { background-color: darken(var(--color-warning), 10%); border-color: darken(var(--color-warning), 10%); color: #212529; text-decoration: none;}
.btn-info { background-color: var(--color-info); border-color: var(--color-info); color: #fff; }
.btn-info:hover { background-color: darken(var(--color-info), 10%); border-color: darken(var(--color-info), 10%); color: #fff; text-decoration: none;}
.btn-outline, .btn-outline-secondary { background-color: transparent; border-color: var(--color-border); color: var(--color-text-muted); }
.btn-outline:hover, .btn-outline-secondary:hover { background-color: var(--color-sidebar-hover-bg); color: var(--color-text); text-decoration: none; }
.btn-outline-danger { color: var(--color-danger); border-color: var(--color-danger);}
.btn-outline-danger:hover { background-color: var(--color-danger); color: #fff; }
.btn-outline-primary { color: var(--primary-color); border-color: var(--primary-color);}
.btn-outline-primary:hover { background-color: var(--primary-color); color: #fff; }
.btn-outline-success { color: var(--color-success); border-color: var(--color-success);}
.btn-outline-success:hover { background-color: var(--color-success); color: #fff; }
.floating-action-btn { position: fixed; bottom: var(--spacing-lg); right: var(--spacing-lg); width: 56px; height: 56px; border-radius: 50%; background-color: var(--primary-color); color: #fff; border: none; box-shadow: 0 6px 20px rgba(var(--primary-color-rgb), 0.4); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; cursor: pointer; z-index: 800; transition: transform 0.2s ease-out, background-color var(--transition-speed-fast); }
.floating-action-btn:hover { background-color: var(--primary-hover); transform: scale(1.05); }
.floating-action-btn:active { transform: scale(0.95); }
.form-group { margin-bottom: var(--spacing-md); }
.form-label, label { display: block; font-size: 0.9rem; font-weight: 500; margin-bottom: var(--spacing-xs); color: var(--color-text-muted); }
.form-control, .form-select { display: block; width: 100%; padding: 0.6rem 0.8rem; font-size: 0.95rem; font-weight: 400; line-height: 1.5; color: var(--color-text); background-color: var(--color-input-bg); background-clip: padding-box; border: 1px solid var(--color-input-border); appearance: none; border-radius: var(--border-radius); transition: border-color var(--transition-speed-fast), box-shadow var(--transition-speed-fast); }
.form-control:focus, .form-select:focus { color: var(--color-text); background-color: var(--color-input-bg); border-color: var(--primary-color); outline: 0; box-shadow: 0 0 0 3px var(--color-primary-glow); }
.form-control::placeholder { color: var(--color-text-subtle); opacity: 1; }
.form-select { background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%236c757d' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 0.8rem center; background-size: 16px 12px; padding-right: 2.5rem; }
[data-theme="dark"] .form-select { background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23adb5bd' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e"); }
textarea.form-control { min-height: calc(1.5em + 1.2rem + 2px); resize: vertical; }
.form-control-sm, .form-select-sm { padding: 0.4rem 0.6rem; font-size: 0.85rem; border-radius: var(--border-radius-sm); }
.form-check { display: flex; align-items: center; padding-left: 0; margin-bottom: var(--spacing-md); }
.form-check-input { width: 1.1em; height: 1.1em; margin-top: 0.1em; margin-right: 0.5em; vertical-align: top; background-color: var(--color-input-bg); border: 1px solid var(--color-input-border); appearance: none; border-radius: 0.25em; cursor: pointer; transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out; flex-shrink: 0; }
.form-check-input:checked { background-color: var(--primary-color); border-color: var(--primary-color); background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10l3 3l6-6'/%3e%3c/svg%3e"); background-size: 60%; background-repeat: no-repeat; background-position: center; }
.form-check-input:focus { border-color: var(--primary-color); outline: 0; box-shadow: 0 0 0 0.25rem var(--color-primary-glow); }
.form-check-label { font-size: 0.9rem; color: var(--color-text); cursor: pointer; margin-bottom: 0; }
.form-check.form-switch { padding-left: 2.8em; position: relative; }
.form-check.form-switch .form-check-input { width: 2.2em; height: 1.2em; margin-left: -2.8em; background-image: none; border-radius: 1.2em; background-color: var(--color-border); border-color: var(--color-border); position: relative; transition: background-position .15s ease-in-out; }
.form-check.form-switch .form-check-input::before { content: ""; position: absolute; top: 0.1em; left: 0.1em; width: 0.9em; height: 0.9em; background-color: #fff; border-radius: 50%; transition: transform .15s ease-in-out; }
.form-check.form-switch .form-check-input:checked { background-color: var(--primary-color); border-color: var(--primary-color); background-position: 100% center; }
.form-check.form-switch .form-check-input:checked::before { transform: translateX(1.1em); }
.form-text { font-size: 0.8rem; color: var(--color-text-muted); margin-top: var(--spacing-xs); }
.form-row { display: flex; gap: var(--spacing-md); margin-bottom: var(--spacing-md); }
.form-row .form-group { flex: 1; margin-bottom: 0; }
.input-group { position: relative; display: flex; flex-wrap: wrap; align-items: stretch; width: 100%; }
.input-group > .form-control, .input-group > .form-select { position: relative; flex: 1 1 auto; width: 1%; min-width: 0; }
.input-group > .form-control:not(:last-child), .input-group > .form-select:not(:last-child) { border-top-right-radius: 0; border-bottom-right-radius: 0; }
.input-group > :not(:first-child):not(.dropdown-menu) { margin-left: -1px; border-top-left-radius: 0; border-bottom-left-radius: 0; }
.input-group-text { display: flex; align-items: center; padding: 0.6rem 0.8rem; font-size: 0.95rem; font-weight: 400; line-height: 1.5; color: var(--color-text-muted); text-align: center; white-space: nowrap; background-color: var(--color-sidebar-hover-bg); border: 1px solid var(--color-input-border); border-radius: var(--border-radius); }
.input-group-sm > .btn, .input-group-sm > .input-group-text { padding: 0.4rem 0.6rem; font-size: 0.85rem; border-radius: var(--border-radius-sm); }
.input-group-sm > .form-control, .input-group-sm > .form-select { font-size: 0.85rem; border-radius: var(--border-radius-sm); }
.text-muted { color: var(--color-text-muted) !important; }
.text-success { color: var(--color-success) !important; }
.text-danger { color: var(--color-danger) !important; }
.text-warning { color: var(--color-warning) !important; }
.text-info { color: var(--color-info) !important; }
.text-center { text-align: center !important; }
.text-end { text-align: end !important; }
.fst-italic { font-style: italic !important; }
.bg-success { background-color: var(--color-success) !important; color: #fff !important;}
.bg-danger { background-color: var(--color-danger) !important; color: #fff !important;}
.bg-warning { background-color: var(--color-warning) !important; color: #212529 !important;}
.bg-info { background-color: var(--color-info) !important; color: #fff !important;}
.bg-secondary { background-color: var(--secondary-color) !important; color: #fff !important;}
.bg-light { background-color: var(--color-sidebar-hover-bg) !important; }
[data-theme="dark"] .bg-light { background-color: var(--color-sidebar-hover-bg) !important; }
.badge { display: inline-block; padding: 0.35em 0.65em; font-size: 0.75em; font-weight: 700; line-height: 1; color: #fff; text-align: center; white-space: nowrap; vertical-align: baseline; border-radius: var(--border-radius-sm); }
.badge.rounded-pill { border-radius: 50rem; }

/* -------------------------------------------------------------------------- */
/* --- Modals --- */
/* -------------------------------------------------------------------------- */
/* ... (Sem alterações significativas aqui) ... */
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--color-modal-overlay); display: flex; align-items: center; justify-content: center; z-index: 1100; opacity: 0; visibility: hidden; transition: opacity var(--transition-speed) var(--transition-timing), visibility 0s var(--transition-speed) linear; }
.modal-overlay.active { opacity: 1; visibility: visible; transition-delay: 0s; }
.modal { background-color: var(--color-modal-bg); border-radius: var(--border-radius-lg); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); width: 90%; max-width: 600px; display: flex; flex-direction: column; max-height: 90vh; transform: scale(0.95) translateY(20px); transition: transform var(--transition-speed) var(--transition-timing), background-color var(--transition-speed) var(--transition-timing); overflow: hidden; }
.modal-overlay.active .modal { transform: scale(1) translateY(0); }
.modal-sm { max-width: 400px; }
.modal-lg { max-width: 800px; }
.modal-xl { max-width: 1140px; }
.modal-header { display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md) var(--spacing-lg); border-bottom: 1px solid var(--color-border-subtle); }
.modal-title { margin: 0; font-size: 1.25rem; font-weight: 500; }
.modal-close { background: none; border: none; font-size: 1.8rem; font-weight: 300; line-height: 1; color: var(--color-text-muted); cursor: pointer; padding: 0 var(--spacing-sm); transition: color var(--transition-speed-fast); }
.modal-close:hover { color: var(--color-danger); }
.modal-body { padding: var(--spacing-lg); overflow-y: auto; flex-grow: 1; }
.modal-footer { display: flex; justify-content: flex-end; gap: var(--spacing-sm); padding: var(--spacing-md) var(--spacing-lg); border-top: 1px solid var(--color-border-subtle); background-color: rgba(0,0,0,0.02); }
[data-theme="dark"] .modal-footer { background-color: rgba(255,255,255,0.03); }
.modal-warning .modal-header { border-bottom: none; }
.modal-warning .modal-title i { color: var(--color-warning); margin-right: var(--spacing-sm); }

/* -------------------------------------------------------------------------- */
/* --- Dashboard --- */
/* -------------------------------------------------------------------------- */
/* ... (Sem alterações significativas, exceto Orçamento e Metas ajustados antes) ... */
.dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--spacing-lg); margin-bottom: var(--spacing-lg); }
.balance-card { position: relative; overflow: hidden; border-left-width: 5px; border-left-style: solid; }
.balance-card.pix { border-left-color: var(--color-pix-border); }
.balance-card.cash { border-left-color: var(--color-cash-border); }
.balance-card.card-balance { border-left-color: var(--color-card-balance-border); }
.balance-card .card-header { background: none; border-bottom: none; padding-bottom: var(--spacing-sm); }
.balance-card .card-title { font-size: 1rem; font-weight: 500; color: var(--color-text-muted); }
.balance-card .card-header i { font-size: 1.5rem; color: var(--color-text-subtle); opacity: 0.8; }
.balance-card.pix .card-header i { color: var(--color-pix-border); }
.balance-card.cash .card-header i { color: var(--color-cash-border); }
.balance-card.card-balance .card-header i { color: var(--color-card-balance-border); }
.balance-card .card-body { padding-top: 0; padding-bottom: var(--spacing-sm); }
.balance-card .card-value { font-size: 2rem; font-weight: 600; color: var(--color-text); margin-bottom: var(--spacing-xs); }
.card.card-positive .card-value { color: var(--color-positive); }
.card.card-negative .card-value { color: var(--color-negative); }
.balance-card .card-footer { background: none; border-top: 1px solid var(--color-border-subtle); font-size: 0.85rem; padding-top: var(--spacing-sm); }
.budget-summary-card .budget-details { display: flex; align-items: baseline; gap: var(--spacing-sm); font-size: 0.9rem; color: var(--color-text-muted); flex-wrap: wrap; }
.budget-summary-card .budget-details strong { color: var(--color-text); font-weight: 600; }
.budget-summary-card .budget-details span:nth-child(3) { margin-left: auto; }
.progress-container { height: 8px; background-color: var(--color-border); border-radius: 8px; overflow: hidden; margin-top: var(--spacing-sm); }
.progress-bar { height: 100%; background-color: var(--primary-color); transition: width 0.5s ease-out; border-radius: 8px; }
.budget-progress.budget-ok .progress-bar { background-color: var(--color-success); }
.budget-progress.budget-warning .progress-bar { background-color: var(--color-warning); }
.budget-progress.budget-over .progress-bar { background-color: var(--color-danger); }
.goals-summary { margin-bottom: var(--spacing-lg); }
.goals-summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: var(--spacing-md); margin-bottom: var(--spacing-lg); }
.goals-summary-grid .summary-card { background-color: rgba(0,0,0,0.02); border: 1px solid var(--color-border-subtle); border-radius: var(--border-radius); padding: var(--spacing-md); text-align: center; display: flex; flex-direction: column; align-items: center; gap: var(--spacing-sm); }
[data-theme="dark"] .goals-summary-grid .summary-card { background-color: rgba(255,255,255,0.03); }
.goals-summary-grid .summary-icon { font-size: 1.8rem; color: var(--primary-color); margin-bottom: var(--spacing-xs); }
.goals-summary-grid .summary-text h4 { font-size: 0.85rem; margin-bottom: 2px; color: var(--color-text-muted); font-weight: 400;}
.goals-summary-grid .summary-value { font-size: 1.2rem; font-weight: 600; }
.goals-priority { margin-top: var(--spacing-lg); border-top: 1px solid var(--color-border-subtle); padding-top: var(--spacing-lg); }
.goals-priority h4 { font-size: 1rem; margin-bottom: var(--spacing-md); color: var(--color-text-muted); }
.priority-item { display: flex; flex-direction: column; gap: var(--spacing-xs); margin-bottom: var(--spacing-md); padding-bottom: var(--spacing-sm); border-bottom: 1px solid var(--color-border-subtle); }
.priority-item:last-child { margin-bottom: 0; border-bottom: none; }
.priority-details { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: var(--spacing-sm); }
.priority-name { font-weight: 500; flex-grow: 1; }
.priority-date { font-size: 0.85rem; color: var(--color-text-muted); white-space: nowrap; }
.priority-progress { width: 100%; height: 5px; background-color: var(--color-border); border-radius: 5px; overflow: hidden; margin-top: var(--spacing-xs); }
.priority-progress .progress-bar { height: 100%; background-color: var(--primary-color); border-radius: 5px; transition: width 0.5s ease-out; }
.upcoming-bills-list, .transaction-history { max-height: 400px; overflow-y: auto; padding-right: var(--spacing-sm); }
.charts-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--spacing-lg); margin-top: var(--spacing-lg); }
.chart-card { padding: var(--spacing-md); min-width: 0; /* Ajuda a prevenir overflow */ }
.chart-title { font-size: 1rem; font-weight: 500; margin-bottom: var(--spacing-md); text-align: center; color: var(--color-text-muted); }
.chart-container { position: relative; width: 100%; min-height: 230px; aspect-ratio: 16 / 10; max-width: 100%; }
.chart-empty-message { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: var(--color-text-muted); font-size: 0.9rem; }
.chart-empty-message i { display: block; font-size: 2rem; margin-bottom: var(--spacing-sm); opacity: 0.5; }

/* -------------------------------------------------------------------------- */
/* --- Listas --- */
/* -------------------------------------------------------------------------- */

/* Transações (Layout Grid Atualizado) */
.transaction-list, .scheduled-list, .goals-container, .notes-list-container, #recurringListContainer, #invoiceListContainer, #debtorListContainer { display: flex; flex-direction: column; }
#allTransactions .transaction-item { padding-left: var(--spacing-lg); padding-right: var(--spacing-lg); }
.transaction-item { display: grid; grid-template-columns: auto 1fr auto; grid-template-rows: auto auto; gap: 0 var(--spacing-md); align-items: center; padding: var(--spacing-md) var(--spacing-lg); border-bottom: 1px solid var(--color-border-subtle); cursor: pointer; transition: background-color var(--transition-speed-fast); }
.transaction-item:hover { background-color: rgba(0,0,0,0.03); }
[data-theme="dark"] .transaction-item:hover { background-color: rgba(255,255,255,0.04); }
.transaction-icon { grid-row: 1 / 3; align-self: center; margin-right: var(--spacing-md); width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 1.2rem; flex-shrink: 0; }
.transaction-details { grid-column: 2 / 3; grid-row: 1 / 2; display: flex; flex-direction: column; min-width: 0; align-self: start; }
.transaction-title { font-weight: 500; margin-bottom: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.transaction-meta-payment-wrapper { grid-column: 2 / 3; grid-row: 2 / 3; display: flex; flex-wrap: wrap; gap: var(--spacing-sm); align-items: center; margin-top: -2px; }
.transaction-meta { font-size: 0.85rem; color: var(--color-text-muted); display: flex; flex-wrap: wrap; gap: var(--spacing-sm); align-items: center; margin: 0; }
.transaction-meta span i { margin-right: var(--spacing-xs); font-size: 0.8em; }
.transaction-payment-method { font-size: 0.85rem; color: var(--color-text-subtle); display: flex; align-items: center; gap: var(--spacing-xs); margin: 0; }
.transaction-payment-method i { font-size: 0.9em; }
.transaction-amount-actions-wrapper { grid-column: 3 / 4; grid-row: 1 / 3; display: flex; flex-direction: column; align-items: flex-end; justify-content: center; margin-left: auto; padding-left: var(--spacing-md); }
.transaction-amount { font-weight: 600; font-size: 1.1rem; white-space: nowrap; margin-bottom: var(--spacing-xs); margin-left: 0; padding-left: 0; }
.amount-positive { color: var(--color-positive); }
.amount-negative { color: var(--color-negative); }
.transaction-actions { display: flex; gap: var(--spacing-xs); margin-left: 0; }
.action-btn { background: none; border: none; color: var(--color-text-muted); padding: var(--spacing-xs); cursor: pointer; transition: color var(--transition-speed-fast); font-size: 0.9rem; }
.action-btn:hover { color: var(--primary-color); }
.action-btn.delete-transaction:hover, .action-btn.delete-scheduled-item-btn:hover, .action-btn.delete-goal:hover, .action-btn.delete-note:hover, .action-btn.delete-debtor:hover { color: var(--color-danger); }
.action-btn:disabled { color: var(--color-text-subtle); opacity: 0.6; cursor: not-allowed; }
.transaction-item .btn-sm { padding: 0.2rem 0.4rem; font-size: 0.8rem; }
.transaction-title span[class$="-indicator"], .transaction-title span[class$="-icon"] { font-size: 0.8em; margin-left: var(--spacing-xs); color: var(--color-text-subtle); cursor: help; vertical-align: middle; }
.transaction-attachment-icon i { color: var(--primary-color); opacity: 0.8;}
.debt-origin-indicator i { color: var(--color-info); }

/* Agendamentos (Layout Grid Atualizado) */
.bill-item { display: grid; grid-template-columns: auto 1fr auto; gap: var(--spacing-sm) var(--spacing-md); align-items: center; padding: var(--spacing-md) var(--spacing-lg); border-bottom: 1px solid var(--color-border-subtle); cursor: default; }
.bill-item.paid { opacity: 0.7; }
.bill-item.overdue .bill-title { color: var(--color-danger); font-weight: 500; }
.bill-item.insufficient-balance .bill-title { color: var(--color-warning); font-weight: 500; }
.bill-item.pending .bill-title { color: var(--color-info); font-weight: 500; }
.bill-category-icon { grid-row: 1 / 3; align-self: center; width: 40px; height: 40px; border-radius: var(--border-radius-sm); background-color: var(--color-border-subtle); display: flex; align-items: center; justify-content: center; font-size: 1.2rem; color: var(--color-text-muted); flex-shrink: 0; }
.bill-details { grid-column: 2 / 3; grid-row: 1 / 3; min-width: 0; align-self: center; }
.bill-title { font-weight: 500; margin-bottom: var(--spacing-xs); }
.bill-category-text { font-size: 0.8em; color: var(--color-text-muted); font-weight: 400; }
.bill-meta { font-size: 0.85rem; color: var(--color-text-muted); display: flex; flex-wrap: wrap; gap: var(--spacing-sm); align-items: center; }
.bill-meta span i { margin-right: var(--spacing-xs); font-size: 0.8em; }
.bill-meta .separator { margin: 0 var(--spacing-xs); }
.bill-amount-actions-wrapper { grid-column: 3 / 4; grid-row: 1 / 3; display: flex; flex-direction: column; /* Empilha valor e ações */ align-items: flex-end; /* Alinha à direita */ gap: var(--spacing-xs); margin-left: auto; padding-left: var(--spacing-md); }
.bill-amount { font-weight: 600; font-size: 1.1rem; color: var(--color-negative); white-space: nowrap; margin-left: 0; padding-left: 0; text-align: right; width: 100%; }
.bill-actions { margin-left: 0; display: flex; gap: var(--spacing-sm); width: 100%; justify-content: flex-end; } /* Ações abaixo e alinhadas */

/* Metas (Layout Atualizado) */
.goal-item { border: 1px solid var(--color-border-subtle); border-radius: var(--border-radius); margin-bottom: var(--spacing-lg); padding: var(--spacing-lg); display: flex; flex-direction: column; cursor: default; gap: var(--spacing-md); }
.goal-item.completed { opacity: 0.8; }
.goal-header { display: flex; justify-content: space-between; align-items: flex-start; gap: var(--spacing-md); }
.goal-content { display: flex; align-items: center; gap: var(--spacing-lg); flex-grow: 1;}
.goal-image, .goal-image-placeholder { width: 60px; height: 60px; border-radius: var(--border-radius); object-fit: cover; flex-shrink: 0; background-color: var(--color-border-subtle); }
.goal-image-placeholder { display: flex; align-items: center; justify-content: center; color: var(--color-text-muted); font-size: 1.5rem;}
.goal-info h3 { font-size: 1.2rem; margin: 0 0 var(--spacing-xs) 0; }
.goal-meta { display: flex; gap: var(--spacing-xs) var(--spacing-md); font-size: 0.85rem; color: var(--color-text-muted); flex-wrap: wrap; margin-top: var(--spacing-xs); }
.goal-meta span i { margin-right: var(--spacing-xs); }
.goal-time-left.overdue { color: var(--color-danger); font-weight: 500; }
.goal-time-left.due-today { color: var(--color-warning); font-weight: 500; }
.goal-time-left.due-soon { color: var(--primary-color); }
.goal-time-left.completed { color: var(--color-success); font-weight: 500; }
.goal-actions { display: flex; gap: var(--spacing-xs); }
.goal-progress-details { margin-top: var(--spacing-sm); margin-bottom: var(--spacing-md); }
.goal-progress-info { display: flex; justify-content: space-between; font-size: 0.9rem; margin-top: var(--spacing-xs); color: var(--color-text-muted); }
.goal-progress-info span:last-child { font-weight: 600; color: var(--color-text); }
.projection-info { font-size: 0.8rem; color: var(--color-text-subtle); margin-bottom: var(--spacing-sm); }
.goal-contribution { display: flex; gap: var(--spacing-sm); align-items: center; margin-top: var(--spacing-md); border-top: 1px solid var(--color-border-subtle); padding-top: var(--spacing-md); justify-content: flex-end; }
.contribution-input { flex-grow: 1; max-width: 120px; }
.goal-complete-action { text-align: right; margin-top: var(--spacing-sm); }

/* Notas (Cores Atualizadas) */
.notes-list-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-lg); }
.note-card { border: 1px solid transparent; border-left-width: 5px; border-radius: var(--border-radius); padding: var(--spacing-md) var(--spacing-lg); display: flex; flex-direction: column; gap: var(--spacing-md); min-height: 160px; transition: transform 0.2s ease-out, box-shadow 0.2s ease-out, border-color 0.2s, background-color 0.2s; cursor: pointer; border-left-color: var(--note-border-default); background-color: var(--note-faint-bg-default); /* Fundo Sutil Padrão */ color: var(--note-text-default); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
[data-theme="dark"] .note-card { box-shadow: 0 2px 5px rgba(0,0,0,0.15); }
.note-card:hover { transform: translateY(-4px) scale(1.01); box-shadow: 0 8px 20px rgba(0,0,0,0.1); border-color: var(--note-border-default); }
[data-theme="dark"] .note-card:hover { box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
/* Aplica fundos e bordas específicas */
.note-color-yellow { background-color: var(--note-faint-bg-yellow); color: var(--note-text-yellow); border-left-color: var(--note-border-yellow); }
.note-color-yellow:hover { border-color: var(--note-border-yellow); }
.note-color-blue { background-color: var(--note-faint-bg-blue); color: var(--note-text-blue); border-left-color: var(--note-border-blue); }
.note-color-blue:hover { border-color: var(--note-border-blue); }
.note-color-green { background-color: var(--note-faint-bg-green); color: var(--note-text-green); border-left-color: var(--note-border-green); }
.note-color-green:hover { border-color: var(--note-border-green); }
.note-color-red { background-color: var(--note-faint-bg-red); color: var(--note-text-red); border-left-color: var(--note-border-red); }
.note-color-red:hover { border-color: var(--note-border-red); }
.note-color-purple { background-color: var(--note-faint-bg-purple); color: var(--note-text-purple); border-left-color: var(--note-border-purple); }
.note-color-purple:hover { border-color: var(--note-border-purple); }
.note-header { display: flex; justify-content: space-between; align-items: center; gap: var(--spacing-sm); }
.note-title { font-size: 1.1rem; font-weight: 600; margin: 0; flex-grow: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: inherit; /* Herda cor do texto do card */ }
.note-type-indicator { margin-right: var(--spacing-xs); color: inherit; opacity: 0.7; }
.note-actions { display: flex; gap: var(--spacing-xs); }
.note-content { font-size: 0.95rem; flex-grow: 1; overflow-wrap: break-word; word-break: break-word; max-height: 200px; overflow-y: auto; line-height: 1.6; color: inherit; /* Herda cor do texto do card */ }
.note-footer { display: flex; justify-content: space-between; align-items: center; font-size: 0.8rem; color: inherit; opacity: 0.8; /* Levemente mais transparente */ border-top: 1px solid rgba(0,0,0,0.05); padding-top: var(--spacing-sm); margin-top: auto; }
[data-theme="dark"] .note-footer { border-top-color: rgba(255,255,255,0.08); }
.note-date i, .note-reminder-info i, .note-task-info i { margin-right: var(--spacing-xs); }
.note-meta-icons { display: flex; gap: var(--spacing-sm); }
.note-reminder-info.has-reminder-active i { color: var(--color-warning); animation: pulse 1.5s infinite; }
.task-line-item { display: flex; align-items: center; gap: var(--spacing-sm); margin-bottom: var(--spacing-xs); }
.task-checkbox-visual { font-family: monospace; font-size: 1.1em; }
.task-checkbox-visual.completed { color: var(--color-success); }
.task-checkbox-visual.pending { color: inherit; opacity: 0.7; }
.task-text.completed-text { text-decoration: line-through; opacity: 0.7; }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
.note-card .task-line-item input[type="checkbox"] { accent-color: var(--note-border-default); width: 1.1em; height: 1.1em; cursor: pointer; }
.note-color-yellow .task-line-item input[type="checkbox"] { accent-color: var(--note-border-yellow); }
.note-color-blue .task-line-item input[type="checkbox"] { accent-color: var(--note-border-blue); }
.note-color-green .task-line-item input[type="checkbox"] { accent-color: var(--note-border-green); }
.note-color-red .task-line-item input[type="checkbox"] { accent-color: var(--note-border-red); }
.note-color-purple .task-line-item input[type="checkbox"] { accent-color: var(--note-border-purple); }
#noteReaderModal.note-color-yellow .task-line-item input[type="checkbox"] { accent-color: var(--note-border-yellow); }
#noteReaderModal.note-color-blue .task-line-item input[type="checkbox"] { accent-color: var(--note-border-blue); }
#noteReaderModal.note-color-green .task-line-item input[type="checkbox"] { accent-color: var(--note-border-green); }
#noteReaderModal.note-color-red .task-line-item input[type="checkbox"] { accent-color: var(--note-border-red); }
#noteReaderModal.note-color-purple .task-line-item input[type="checkbox"] { accent-color: var(--note-border-purple); }
/* Estilos para as opções de cores no modal de notas */
#noteModal .theme-colors { /* Classe container das bolinhas no modal */ display: flex; flex-wrap: wrap; gap: var(--spacing-sm); margin-top: var(--spacing-xs); }
#noteModal .theme-colors .color-option { width: 28px; height: 28px; border-radius: 50%; cursor: pointer; border: 2px solid var(--color-border); transition: transform 0.1s ease-out, border-color 0.2s; position: relative; }
#noteModal .theme-colors .color-option:hover { transform: scale(1.1); }
#noteModal .theme-colors .color-option.selected { border-width: 3px; transform: scale(1.1); }
/* Cores das bolinhas no modal de notas */
#noteModal .theme-colors .color-option[data-color="default"] { background-color: #e9ecef; border-color: #adb5bd; }
#noteModal .theme-colors .color-option[data-color="yellow"] { background-color: #fff3cd; border-color: #ffc107; }
#noteModal .theme-colors .color-option[data-color="blue"] { background-color: #cfe2ff; border-color: #0d6efd; }
#noteModal .theme-colors .color-option[data-color="green"] { background-color: #d1e7dd; border-color: #198754; }
#noteModal .theme-colors .color-option[data-color="red"] { background-color: #f8d7da; border-color: #dc3545; }
#noteModal .theme-colors .color-option[data-color="purple"] { background-color: #e2d9f3; border-color: #6f42c1; }
/* Checkmark para a cor selecionada */
#noteModal .theme-colors .color-option.selected::after { content: '\f00c'; font-family: 'Font Awesome 6 Free'; font-weight: 900; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 0.8rem; color: var(--color-text); /* Usa cor de texto para visibilidade */ text-shadow: 0 0 1px var(--color-modal-bg); }
/* Ajuste para tema escuro */
[data-theme="dark"] #noteModal .theme-colors .color-option[data-color="default"] { background-color: #495057; border-color: #6c757d; }
[data-theme="dark"] #noteModal .theme-colors .color-option[data-color="yellow"] { background-color: #664d03; border-color: #ffc107; }
[data-theme="dark"] #noteModal .theme-colors .color-option[data-color="blue"] { background-color: #052c65; border-color: #0d6efd; }
[data-theme="dark"] #noteModal .theme-colors .color-option[data-color="green"] { background-color: #0a3622; border-color: #198754; }
[data-theme="dark"] #noteModal .theme-colors .color-option[data-color="red"] { background-color: #58151c; border-color: #dc3545; }
[data-theme="dark"] #noteModal .theme-colors .color-option[data-color="purple"] { background-color: #442166; border-color: #6f42c1; }
[data-theme="dark"] #noteModal .theme-colors .color-option.selected::after { color: var(--color-modal-bg); text-shadow: 0 0 1px var(--color-text); }

/* Recorrências (Layout Atualizado) */
.recurring-item { display: flex; align-items: center; gap: var(--spacing-md); padding: var(--spacing-md) var(--spacing-lg); border-bottom: 1px solid var(--color-border-subtle); min-width: 0; /* Ajuda a previnir overflow */ }
.recurring-item:last-child { border-bottom: none; }
.recurring-icon { width: 40px; height: 40px; border-radius: var(--border-radius); display: flex; align-items: center; justify-content: center; font-size: 1.3rem; flex-shrink: 0; background-color: var(--color-border-subtle); color: var(--color-text-muted); }
.recurring-item[data-type="expense"] .recurring-icon { background-color: rgba(var(--color-danger-rgb, 220, 53, 69), 0.1); color: var(--color-danger); }
.recurring-item[data-type="income"] .recurring-icon { background-color: rgba(var(--color-success-rgb, 25, 135, 84), 0.1); color: var(--color-success); }
.recurring-icon i { line-height: 1; }
.recurring-details { flex-grow: 1; min-width: 0; } /* Garante que detalhes podem encolher */
.recurring-name { font-weight: 500; margin-bottom: var(--spacing-xs); }
.recurring-meta { font-size: 0.85rem; color: var(--color-text-muted); display: flex; flex-wrap: wrap; gap: var(--spacing-xs) var(--spacing-sm); /* Menor gap vertical */ align-items: center; }
.recurring-meta span { display: inline-flex; align-items: center; gap: var(--spacing-xs); }
.recurring-meta i { font-size: 0.9em; }
.recurring-amount { font-weight: 600; font-size: 1.1rem; white-space: nowrap; margin-left: auto; padding-left: var(--spacing-md); }
.recurring-amount.amount-positive::before { content: "+ "; color: var(--color-positive); }
.recurring-amount.amount-negative::before { content: "- "; color: var(--color-negative); }
.recurring-actions { display: flex; gap: var(--spacing-xs); margin-left: var(--spacing-sm); }

.empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: var(--spacing-xl); border: 2px dashed var(--color-border); border-radius: var(--border-radius); color: var(--color-text-muted); min-height: 200px; }
.empty-state i:first-child { font-size: 2.5rem; margin-bottom: var(--spacing-md); opacity: 0.6; }
.empty-state h3 { font-size: 1.2rem; margin-bottom: var(--spacing-xs); color: var(--color-text); }

/* -------------------------------------------------------------------------- */
/* --- Seção Devedores --- */
/* -------------------------------------------------------------------------- */
/* ... (Layout atualizado na resposta anterior já incluído aqui) ... */
#debtors-section .card-body { padding: 0; }
.debtors-list-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: var(--spacing-lg); padding: var(--spacing-lg); }
.debtor-card-revamped { border: 1px solid var(--color-border-subtle); border-radius: var(--border-radius); padding: var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-lg); transition: box-shadow var(--transition-speed-fast), border-color var(--transition-speed-fast); cursor: pointer; background-color: var(--color-card-bg); }
.debtor-card-revamped:hover { box-shadow: 0 5px 15px var(--color-shadow); border-color: var(--color-border); }
.debtor-card-image-info { display: flex; align-items: center; gap: var(--spacing-md); flex-grow: 1; min-width: 0; }
.debtor-card-image { width: 50px; height: 50px; border-radius: 50%; object-fit: cover; flex-shrink: 0; border: 2px solid var(--color-border); }
.debtor-card-info { min-width: 0; }
.debtor-card-name { font-size: 1.1rem; font-weight: 600; margin: 0 0 2px 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.debtor-card-contact { font-size: 0.85rem; color: var(--color-text-muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: block; margin-bottom: var(--spacing-xs); }
.debtor-card-balance { font-size: 1.1rem; font-weight: 700; color: var(--color-negative); }
.debtor-card-balance.zero { color: var(--color-text-muted); font-weight: 500; }
.debtor-card-actions { display: flex; gap: var(--spacing-sm); flex-shrink: 0; }
.debtor-card-actions .action-btn { background-color: transparent; border: 1px solid var(--color-border); border-radius: var(--border-radius-sm); padding: 0.4rem 0.7rem; color: var(--color-text-muted); font-size: 0.9rem; transition: background-color 0.2s, color 0.2s, border-color 0.2s; }
.debtor-card-actions .action-btn i { margin-right: 0; }
.debtor-card-actions .action-btn.details-debtor { color: var(--color-info); border-color: var(--color-info); }
.debtor-card-actions .action-btn.edit-debtor { color: var(--primary-color); border-color: var(--primary-color); }
.debtor-card-actions .action-btn.delete-debtor { color: var(--color-danger); border-color: var(--color-danger); }
.debtor-card-actions .action-btn.add-payment-debtor { color: var(--color-success); border-color: var(--color-success); }
.debtor-card-actions .action-btn:hover { background-color: var(--color-sidebar-hover-bg); color: var(--color-text); }
.debtor-card-actions .action-btn.details-debtor:hover { background-color: rgba(var(--color-info-rgb, 13, 202, 240), 0.1); color: var(--color-info); }
.debtor-card-actions .action-btn.edit-debtor:hover { background-color: rgba(var(--primary-color-rgb), 0.1); color: var(--primary-color); }
.debtor-card-actions .action-btn.delete-debtor:hover { background-color: rgba(var(--color-danger-rgb, 220, 53, 69), 0.1); color: var(--color-danger); }
.debtor-card-actions .action-btn.add-payment-debtor:hover { background-color: rgba(var(--color-success-rgb, 25, 135, 84), 0.1); color: var(--color-success); }

/* -------------------------------------------------------------------------- */
/* --- Seção Configurações --- */
/* -------------------------------------------------------------------------- */
/* ... (Layout atualizado na resposta anterior já incluído aqui) ... */
.settings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-lg); }
.settings-block { display: flex; flex-direction: column; }
.settings-block .card-body { flex-grow: 1; }
.settings-block .card-header i { margin-right: var(--spacing-sm); color: var(--primary-color); opacity: 0.8; }
#settings-section .settings-block .settings-form .form-group { display: flex; flex-direction: column; align-items: flex-start; margin-bottom: var(--spacing-sm); }
#settings-section .settings-block .settings-form #monthlyBudgetInput { max-width: 200px; text-align: left; /* Garante alinhamento */ }
.monetary-input { text-align: left; } /* Aplica globalmente */
.balance-methods { display: flex; flex-direction: column; gap: var(--spacing-md); }
.balance-method { display: grid; grid-template-columns: auto 1fr auto auto; align-items: center; gap: var(--spacing-md); border: 1px solid var(--color-border-subtle); padding: var(--spacing-sm); border-radius: var(--border-radius); }
.balance-method-icon { width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; color: #fff; }
.balance-method-icon.pix { background-color: var(--color-pix-border); }
.balance-method-icon.cash { background-color: var(--color-cash-border); }
.balance-method-icon.card { background-color: var(--color-card-balance-border); }
.balance-method-name { font-size: 0.9rem; font-weight: 500; margin-bottom: 2px; }
.balance-method-amount { font-size: 1.1rem; font-weight: 600; }
.balance-method-actions { display: flex; gap: var(--spacing-xs); }
.balance-method-input { width: 100px; text-align: left; }
.balance-adjust { width: 28px; height: 28px; padding: 0; font-size: 0.9rem; border-radius: 50%; }
.balance-updated-highlight { animation: highlight-bg 1.5s ease-out; }
@keyframes highlight-bg { 0% { background-color: rgba(var(--primary-color-rgb), 0.2); } 100% { background-color: transparent; } }
.theme-options.d-flex { display: flex; align-items: center; gap: var(--spacing-md); flex-wrap: wrap; margin-bottom: var(--spacing-md); }
.theme-options .btn-group { flex-grow: 1; display: flex; justify-content: flex-start; /* Alinha botões à esquerda */ gap: var(--spacing-sm); /* Espaço entre botões */ }
.theme-options .btn-group .btn { flex-basis: auto; /* Remove base fixa */ padding: 0.4rem 0.8rem; /* Ajusta padding */ }
.theme-options .btn-group .btn.active { background-color: var(--primary-color); color: #fff; border-color: var(--primary-color); }
.theme-colors { display: flex; gap: var(--spacing-sm); }
.theme-color-option { width: 28px; height: 28px; border-radius: 50%; cursor: pointer; border: 2px solid var(--color-border); transition: transform 0.1s ease-out, border-color 0.2s; position: relative; }
.theme-color-option:hover { transform: scale(1.1); }
.theme-color-option.selected { border-color: var(--primary-color); box-shadow: 0 0 0 2px var(--primary-color); }
.theme-color-option.selected::after { content: '\f00c'; font-family: 'Font Awesome 6 Free'; font-weight: 900; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 0.8rem; color: #fff; text-shadow: 0 0 2px rgba(0,0,0,0.5); }
.theme-color-option[data-color="default"] { background-color: #0d6efd; }
.theme-color-option[data-color="green"] { background-color: #198754; }
.theme-color-option[data-color="purple"] { background-color: #6f42c1; }
.theme-color-option[data-color="orange"] { background-color: #fd7e14; }
.theme-color-option[data-color="teal"] { background-color: #20c997; }
.theme-color-option[data-color="pink"] { background-color: #d63384; }
#openCategoryEditorBtn { width: 100%; }

/* -------------------------------------------------------------------------- */
/* --- Modal Editor de Categorias --- */
/* -------------------------------------------------------------------------- */
/* ... (Layout atualizado na resposta anterior já incluído aqui) ... */
.category-editor { max-width: 900px; }
.category-editor-filters { display: flex; align-items: center; }
.category-editor-filters .filter-btn { border-color: var(--color-border); color: var(--color-text-muted); }
.category-editor-filters .filter-btn.active { background-color: var(--primary-color); color: #fff; border-color: var(--primary-color); }
.category-editor-filters .filter-btn:hover:not(.active) { background-color: var(--color-sidebar-hover-bg); }
.category-editor-list-container { max-height: 55vh; overflow-y: auto; border: 1px solid var(--color-border); border-radius: var(--border-radius-sm); padding: var(--spacing-sm); background-color: var(--color-background); }
.category-sortable-list { padding-left: 0; }
.category-editor-item { display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-sm) var(--spacing-md); background-color: var(--color-card-bg); border: 1px solid var(--color-border-subtle); border-radius: var(--border-radius-sm); margin-bottom: var(--spacing-sm); cursor: grab; transition: background-color var(--transition-speed-fast); }
.category-editor-item:last-child { margin-bottom: 0; }
.category-editor-item.sortable-ghost { background-color: var(--color-primary-glow); opacity: 0.7; }
.category-drag-handle { color: var(--color-text-subtle); cursor: grab; padding: var(--spacing-xs); }
.category-icon-preview { font-size: 1rem; color: var(--color-text-muted); width: 20px; text-align: center; }
.category-name-display { flex-grow: 1; font-weight: 500; }
.category-type-badge { font-size: 0.7rem; padding: 0.2em 0.5em; margin-left: var(--spacing-sm); text-transform: uppercase; opacity: 0.8; }
.category-actions { display: flex; gap: var(--spacing-xs); margin-left: auto; }
.category-actions button { background-color: transparent; border: 1px solid var(--color-border); border-radius: var(--border-radius-sm); color: var(--color-text-muted); padding: 0.2rem 0.5rem; font-size: 0.8rem; transition: background-color 0.2s, color 0.2s, border-color 0.2s; }
.category-actions button:hover { background-color: var(--color-sidebar-hover-bg); color: var(--color-text); }
.category-actions button.edit-category-btn:hover { color: var(--primary-color); border-color: var(--primary-color); background-color: rgba(var(--primary-color-rgb), 0.1);}
.category-actions button.toggle-visibility-btn:hover { color: var(--color-warning); border-color: var(--color-warning); background-color: rgba(255, 193, 7, 0.1); }
.category-actions button.delete-category-btn:hover { color: var(--color-danger); border-color: var(--color-danger); background-color: rgba(var(--color-danger-rgb, 220, 53, 69), 0.1); }
.category-actions button:disabled { opacity: 0.5; cursor: not-allowed; background-color: transparent !important; color: var(--color-text-subtle) !important; border-color: var(--color-border) !important; }
.category-editor-item input[type="text"] { font-weight: 500; }
.category-title-item { background-color: var(--color-sidebar-hover-bg); font-weight: 600; color: var(--color-text-muted); cursor: pointer; }
.category-title-item .category-name-display::before { content: ""; display: inline-block; width: 0; height: 0; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 6px solid var(--color-text-muted); margin-right: var(--spacing-sm); transition: transform 0.3s ease-in-out; vertical-align: middle; }
.category-title-item.expanded .category-name-display::before { transform: rotate(180deg); }
.subcategory-list { list-style: none; padding-left: var(--spacing-xl); margin: 0; max-height: 0; opacity: 0; overflow: hidden; transition: max-height 0.4s cubic-bezier(0.25, 0.1, 0.25, 1), opacity 0.3s ease-in-out, margin-top 0.3s ease-in-out, margin-bottom 0.3s ease-in-out; }
.category-title-item.expanded + .subcategory-list { max-height: 1000px; opacity: 1; margin-top: var(--spacing-sm); margin-bottom: var(--spacing-sm); }
.category-title-item.expanded { background-color: var(--color-sidebar-active-bg); }
.category-editor-add-actions .input-group-text { background: none; border: none; padding-left: 0; }

/* -------------------------------------------------------------------------- */
/* --- Outros Modais --- */
/* -------------------------------------------------------------------------- */
/* ... (Layout atualizado na resposta anterior já incluído aqui) ... */
.transaction-detail-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-sm) var(--spacing-md); margin-bottom: var(--spacing-md); font-size: 0.95rem; }
.transaction-detail-grid div { overflow-wrap: break-word; word-break: break-word; }
.transaction-detail-grid div strong { color: var(--color-text-muted); margin-right: var(--spacing-xs); display: block; font-size: 0.85rem; }
.transaction-detail-grid div span i { margin-right: var(--spacing-xs); opacity: 0.7; }
.transaction-detail-grid .grid-col-span-2 { grid-column: span 2; }
.detail-section { margin-top: var(--spacing-md); padding-top: var(--spacing-md); border-top: 1px solid var(--color-border-subtle); }
.detail-section strong:first-child { display: block; font-size: 0.9rem; color: var(--color-text-muted); margin-bottom: var(--spacing-xs); }
#detailAmount.amount-positive { color: var(--color-positive); font-weight: 600; }
#detailAmount.amount-negative { color: var(--color-negative); font-weight: 600; }
#attachmentViewerModal .modal-body { padding: var(--spacing-sm); }
#attachmentViewerImage { border: 1px solid var(--color-border); border-radius: var(--border-radius-sm); }
.quick-note-item { padding: var(--spacing-sm); border-bottom: 1px solid var(--color-border-subtle); border-left-width: 3px; border-left-style: solid; cursor: pointer; transition: background-color var(--transition-speed-fast); }
.quick-note-item:last-child { border-bottom: none; }
.quick-note-item:hover { background-color: rgba(0,0,0,0.03); }
[data-theme="dark"] .quick-note-item:hover { background-color: rgba(255,255,255,0.04); }
.quick-note-title { font-weight: 500; font-size: 0.9rem; margin-bottom: var(--spacing-xs); }
.quick-note-content-preview { font-size: 0.85rem; opacity: 0.8; max-height: 3.8em; overflow: hidden; line-height: 1.3; margin-bottom: var(--spacing-xs);}
.quick-note-footer { display: flex; justify-content: space-between; align-items: center; font-size: 0.75rem; color: var(--color-text-muted); }
.quick-note-icons { display: flex; gap: var(--spacing-sm); }
.modal-reader .modal-body { padding: var(--spacing-lg); }
.note-reader-body { line-height: 1.7; }
.note-reader-body .task-line-item input[type="checkbox"] { accent-color: var(--primary-color); margin-right: var(--spacing-sm); cursor: pointer; }
.comparison-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-lg); }
.comparison-result { font-weight: 500; padding: var(--spacing-sm); border: 1px solid var(--color-border); border-radius: var(--border-radius-sm); min-height: 40px; background-color: var(--color-sidebar-hover-bg); }
.comparison-result.cheaper { border-color: var(--color-success); color: var(--color-success); }
.comparison-result.more-expensive { border-color: var(--color-danger); color: var(--color-danger); }
.comparison-summary { font-size: 0.9rem; }
#invoiceViewModal .modal-body { font-size: 0.9rem; }
#invoiceViewModal .invoice-header { display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 2px solid var(--primary-color); padding-bottom: var(--spacing-md); }
#invoiceViewModal .invoice-header .col-6:first-child { flex-basis: 55%; }
#invoiceViewModal .invoice-header .col-6:last-child { flex-basis: 40%; text-align: right; }
#invoiceViewModal #viewDocumentTitle { color: var(--primary-color); font-size: 1.5rem; margin-bottom: var(--spacing-sm); font-weight: 700; }
#invoiceViewModal .invoice-client-info { background-color: var(--color-sidebar-hover-bg); border-left: 4px solid var(--primary-color); }
#invoiceListContainer .invoice-item .invoice-actions .action-btn { background-color: transparent; border: 1px solid var(--color-border); border-radius: var(--border-radius-sm); padding: 0.3rem 0.6rem; color: var(--color-text-muted); transition: background-color 0.2s, color 0.2s, border-color 0.2s; }
#invoiceListContainer .invoice-item .invoice-actions .action-btn i { margin-right: 0; }
#invoiceListContainer .invoice-item .invoice-actions .action-btn.view-invoice { color: var(--color-info); border-color: var(--color-info); }
#invoiceListContainer .invoice-item .invoice-actions .action-btn.edit-invoice { color: var(--primary-color); border-color: var(--primary-color); }
#invoiceListContainer .invoice-item .invoice-actions .action-btn.mark-paid-invoice { color: var(--color-success); border-color: var(--color-success); }
#invoiceListContainer .invoice-item .invoice-actions .action-btn.mark-sent-invoice { color: var(--color-pix-border); border-color: var(--color-pix-border); }
#invoiceListContainer .invoice-item .invoice-actions .action-btn.delete-invoice { color: var(--color-danger); border-color: var(--color-danger); }
#invoiceListContainer .invoice-item .invoice-actions .action-btn:hover { background-color: var(--color-sidebar-hover-bg); color: var(--color-text); }
#invoiceListContainer .invoice-item .invoice-actions .action-btn.view-invoice:hover { background-color: rgba(var(--color-info-rgb, 13, 202, 240), 0.1); border-color: var(--color-info); color: var(--color-info); }
#invoiceListContainer .invoice-item .invoice-actions .action-btn.edit-invoice:hover { background-color: rgba(var(--primary-color-rgb), 0.1); border-color: var(--primary-color); color: var(--primary-color); }
#invoiceListContainer .invoice-item .invoice-actions .action-btn.mark-paid-invoice:hover { background-color: rgba(var(--color-success-rgb, 25, 135, 84), 0.1); border-color: var(--color-success); color: var(--color-success); }
#invoiceListContainer .invoice-item .invoice-actions .action-btn.mark-sent-invoice:hover { background-color: rgba(13, 202, 240, 0.1); border-color: var(--color-pix-border); color: var(--color-pix-border); }
#invoiceListContainer .invoice-item .invoice-actions .action-btn.delete-invoice:hover { background-color: rgba(var(--color-danger-rgb, 220, 53, 69), 0.1); border-color: var(--color-danger); color: var(--color-danger); }

/* -------------------------------------------------------------------------- */
/* --- Value Hiding --- */
/* -------------------------------------------------------------------------- */
.values-hidden .monetary-value, .values-hidden .balance-method-amount span, .values-hidden .debtor-amount-display span.monetary-value, .values-hidden #paymentDebtRemaining.monetary-value, .values-hidden .debtor-card-balance span.monetary-value, .values-hidden .budget-details strong span.monetary-value, .values-hidden .goals-summary-value span.monetary-value, .values-hidden .goal-progress-info span:first-child span.monetary-value { font-size: 0 !important; color: transparent !important; user-select: none; display: inline-block; background: none !important; padding: 0 !important; filter: none !important; }
.values-hidden .monetary-value::before, .values-hidden .balance-method-amount span::before, .values-hidden .debtor-amount-display span.monetary-value::before, .values-hidden #paymentDebtRemaining.monetary-value::before, .values-hidden .debtor-card-balance span.monetary-value::before, .values-hidden .budget-details strong span.monetary-value::before, .values-hidden .goals-summary-value span.monetary-value::before, .values-hidden .goal-progress-info span:first-child span.monetary-value::before { content: "***"; font-size: 1rem; color: var(--color-text-muted); font-weight: 400; letter-spacing: 1px; display: inline-block; vertical-align: baseline; font-family: var(--font-primary); line-height: 1; }
.values-hidden .card-value .monetary-value::before, .values-hidden .balance-card .card-value .monetary-value::before { font-size: 1.8rem; color: var(--color-text); opacity: 0.7; }
.values-hidden .transaction-amount .monetary-value::before, .values-hidden .bill-amount .monetary-value::before, .values-hidden .recurring-amount .monetary-value::before { font-size: 1.1rem; }

/* -------------------------------------------------------------------------- */
/* --- Loading Indicator --- */
/* -------------------------------------------------------------------------- */
/* ... (Sem alterações) ... */
#loadingIndicator { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2000; color: #fff; font-size: 1.1rem; }
.spinner { border: 4px solid rgba(255, 255, 255, 0.3); border-left-color: #fff; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin-bottom: var(--spacing-md); }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* -------------------------------------------------------------------------- */
/* --- Popup/Toast Notifications --- */
/* -------------------------------------------------------------------------- */
/* ... (Sem alterações) ... */
.popup-container { position: fixed; bottom: 20px; right: 20px; z-index: 1500; display: flex; flex-direction: column; align-items: flex-end; gap: 10px; }
.popup { background-color: var(--color-card-bg); color: var(--color-text); padding: 12px 20px; border-radius: var(--border-radius); box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-left: 5px solid var(--secondary-color); display: flex; align-items: center; gap: 15px; min-width: 280px; max-width: 400px; opacity: 0; transform: translateX(100%); transition: transform 0.4s ease-in-out, opacity 0.4s ease-in-out; }
.popup.show { opacity: 1; transform: translateX(0); }
.popup.hide { opacity: 0; transform: translateX(110%); }
[data-theme="dark"] .popup { box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
.popup-icon::before { font-family: 'Font Awesome 6 Free'; font-weight: 900; font-size: 1.2rem; }
.popup.info .popup-icon::before { content: '\f05a'; color: var(--color-info); }
.popup.success .popup-icon::before { content: '\f058'; color: var(--color-success); }
.popup.warning .popup-icon::before { content: '\f071'; color: var(--color-warning); }
.popup.danger .popup-icon::before { content: '\f057'; color: var(--color-danger); }
.popup.info { border-left-color: var(--color-info); }
.popup.success { border-left-color: var(--color-success); }
.popup.warning { border-left-color: var(--color-warning); }
.popup.danger { border-left-color: var(--color-danger); }
.popup-message { flex-grow: 1; font-size: 0.9rem; line-height: 1.4; }
.popup-message small { font-size: 0.8em; opacity: 0.8; }
.popup-message b, .popup-message strong { font-weight: 600; }
.popup-close { background: none; border: none; color: var(--color-text-muted); font-size: 1.4rem; line-height: 1; cursor: pointer; padding: 0 5px; margin-left: 10px; opacity: 0.7; transition: opacity 0.2s; }
.popup-close:hover { opacity: 1; }

/* -------------------------------------------------------------------------- */
/* --- Responsividade --- */
/* -------------------------------------------------------------------------- */

@media (max-width: 992px) {
    .settings-grid, .dashboard-grid, .charts-row, .notes-list-container, .debtors-list-container { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
    .main-content { padding: var(--spacing-md); padding-top: calc(var(--header-height) + var(--spacing-md)); margin: var(--spacing-sm); margin-left: calc(var(--sidebar-width) + var(--spacing-sm)); }
    .transaction-detail-grid { grid-template-columns: 1fr; }
    .transaction-detail-grid .grid-col-span-2 { grid-column: span 1; }
}

@media (max-width: 768px) {
    .sidebar { transform: translateX(-100%); width: 280px; box-shadow: 5px 0 15px rgba(0,0,0,0.1); }
    .sidebar.open { transform: translateX(0); }
    .main-content { margin-left: var(--spacing-sm); margin-right: var(--spacing-sm); padding-top: var(--header-height); }
    .header { left: 0; padding: 0 var(--spacing-md); }
    .menu-toggle { display: block; }
    .close-sidebar { display: block; }
    .page-title { font-size: 1.2rem; margin-left: auto; padding-right: var(--spacing-md); }
    .dashboard-grid, .settings-grid, .charts-row, .notes-list-container, .debtors-list-container { grid-template-columns: 1fr; gap: var(--spacing-md); }
    .form-row { flex-direction: column; gap: var(--spacing-md); }
    .comparison-grid { grid-template-columns: 1fr; }
    .modal { width: 95%; max-height: 95vh; }
    .floating-action-btn { bottom: var(--spacing-md); right: var(--spacing-md); }
    body.body-scroll-locked { overflow: hidden; }

    /* Transações Mobile - Layout Flex dentro do Grid */
    .transaction-item { grid-template-columns: auto 1fr; grid-template-rows: auto auto; gap: var(--spacing-xs) var(--spacing-md); /* Reduz gap vertical */ padding: var(--spacing-md); }
    .transaction-icon { grid-row: 1 / 2; align-self: center; }
    .transaction-details { grid-column: 2 / 3; grid-row: 1 / 2; }
    .transaction-meta-payment-wrapper { grid-column: 1 / 3; grid-row: 2 / 3; margin-top: var(--spacing-xs); display: flex; justify-content: space-between; /* Tenta separar meta e pagamento */ align-items: center; flex-wrap: wrap; gap: var(--spacing-sm); }
    .transaction-amount-actions-wrapper { grid-column: 1 / 3; grid-row: 3 / 4; display: flex; justify-content: space-between; /* Valor Esquerda, Ações Direita */ align-items: center; width: 100%; margin-top: var(--spacing-sm); padding-left: 0; }
    .transaction-amount { margin-bottom: 0; }
    .transaction-actions { margin-left: var(--spacing-sm); /* Espaço antes das ações */ }

    /* Agendamentos Mobile - Layout Atualizado */
    .bill-item { grid-template-columns: auto 1fr; grid-template-rows: auto auto; padding: var(--spacing-md); gap: var(--spacing-xs) var(--spacing-md); }
    .bill-category-icon { grid-row: 1 / 2; align-self: center; }
    .bill-details { grid-column: 2 / 3; grid-row: 1 / 2; align-self: center; }
    .bill-title { margin-bottom: 2px; }
    .bill-meta { grid-column: 1 / 3; grid-row: 2 / 3; margin-top: var(--spacing-xs); /* Meta abaixo */ }
    .bill-amount-actions-wrapper { grid-column: 1 / 3; /* Abaixo da Meta */ grid-row: 3 / 4; display: flex; flex-direction: column; /* Empilha */ align-items: flex-end; /* Alinha à direita */ gap: var(--spacing-xs); margin-top: var(--spacing-sm); margin-left: auto; width: auto; /* Não força 100% */ }
    .bill-amount { font-size: 1rem; width: auto; /* Não força 100% */ text-align: right; }
    .bill-actions { width: auto; /* Não força 100% */ justify-content: flex-end; }

    .card-header .btn span { display: none; }
    .card-header .btn i { margin-right: 0; }
    #transactions-section .filters { flex-direction: column; align-items: stretch; gap: var(--spacing-sm); }
    #transactions-section .filters .card-title { margin-bottom: var(--spacing-sm); }
    #transactions-section .filters .filter-group { width: 100%; }
    #transactions-section .filters .filter-group-search { margin-top: var(--spacing-xs); }
    #transactions-section .filters button { width: 100%; margin-top: var(--spacing-xs); }

    /* Relatórios e Fiscal Mobile - Ajuste botões */
    #reports-section .report-filters,
    #tax-report-section .report-filters { width: 100%; justify-content: center; margin-top: var(--spacing-sm); gap: var(--spacing-sm); }
    #reports-section .report-filters label,
    #tax-report-section .report-filters label { display: none; }
    #reports-section .report-filters input[type="date"],
    #reports-section .report-filters button,
    #tax-report-section .report-filters input[type="date"],
    #tax-report-section .report-filters button { flex-grow: 1; min-width: 90px; /* Reduz min-width */ font-size: 0.8rem; padding: 0.3rem 0.5rem; }
    #reports-section .report-filters #exportReportCsvBtn,
    #tax-report-section .report-filters #generateTaxReportBtn { min-width: auto; flex-grow: 0; } /* Botões principais podem ser menores */

    #tax-report-section .card,
    #transactions-section .card,
    #recurring-section .card { /* Adiciona recorrências */ margin-bottom: calc(var(--spacing-lg) + 60px); } /* Espaço para FAB */

    .debtor-card-revamped { flex-direction: column; align-items: flex-start; }
    .debtor-card-actions { width: 100%; justify-content: flex-end; margin-top: var(--spacing-sm); }

    /* Recorrências Mobile */
    .recurring-item { flex-direction: column; align-items: flex-start; gap: var(--spacing-sm); }
    .recurring-amount { margin-left: 0; align-self: flex-end; padding-left: 0; }
    .recurring-actions { margin-left: 0; align-self: flex-end; margin-top: var(--spacing-xs); }
}

/* -------------------------------------------------------------------------- */
/* --- Helpers Adicionais --- */
/* -------------------------------------------------------------------------- */
/* ... (Sem alterações) ... */
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }
.d-flex { display: flex !important; } .d-none { display: none !important; } .align-items-center { align-items: center !important; } .justify-content-between { justify-content: space-between !important; } .justify-content-center { justify-content: center !important; } .justify-content-end { justify-content: flex-end !important; } .flex-grow-1 { flex-grow: 1 !important; } .flex-column { flex-direction: column !important; } .flex-wrap { flex-wrap: wrap !important; } .gap-1 { gap: 0.25rem !important; } .gap-2 { gap: 0.5rem !important; } .gap-3 { gap: 1rem !important; } .m-0 { margin: 0 !important; } .mb-0 { margin-bottom: 0 !important; } .mb-1 { margin-bottom: 0.25rem !important; } .mb-2 { margin-bottom: 0.5rem !important; } .mb-3 { margin-bottom: 1rem !important; } .mb-4 { margin-bottom: 1.5rem !important; } .mt-1 { margin-top: 0.25rem !important; } .mt-2 { margin-top: 0.5rem !important; } .mt-3 { margin-top: 1rem !important; } .mt-4 { margin-top: 1.5rem !important; } .ms-auto { margin-left: auto !important; } .me-auto { margin-right: auto !important; } .ms-1 { margin-left: 0.25rem !important; } .ms-2 { margin-left: 0.5rem !important; } .ms-3 { margin-left: 1rem !important; } .me-1 { margin-right: 0.25rem !important; } .me-2 { margin-right: 0.5rem !important; } .p-1 { padding: 0.25rem !important; } .p-2 { padding: 0.5rem !important; } .p-3 { padding: 1rem !important; } .p-4 { padding: 1.5rem !important; } .pt-3 { padding-top: 1rem !important; } .pb-3 { padding-bottom: 1rem !important; } .w-100 { width: 100% !important; } .text-uppercase { text-transform: uppercase !important; } .fw-bold { font-weight: 700 !important; } .fw-semibold { font-weight: 600 !important; } .fw-normal { font-weight: 400 !important; } .border { border: 1px solid var(--color-border) !important; } .rounded { border-radius: var(--border-radius) !important; } .rounded-pill { border-radius: 50rem !important; } .rounded-circle { border-radius: 50% !important; } .shadow-sm { box-shadow: 0 .125rem .25rem var(--color-shadow) !important; }
.new-transaction-highlight { animation: highlight-new 3.5s ease-out; }
@keyframes highlight-new { 0%, 100% { background-color: transparent; } 10%, 90% { background-color: rgba(var(--primary-color-rgb), 0.15); } }
